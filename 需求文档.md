### **M1: 智能行程规划 (Intelligent Trip Planning)**

这是应用的核心功能，用户与 AI 交互的主要界面。

- **1.1. 规划需求输入**
  - **1.1.1. 文本输入：** 提供一个主输入框，引导用户输入旅行的关键信息，如目的地、天数、预算、人数、偏好（美食、动漫、购物、自然风光等）。
  - **1.1.2. 语音输入：**
    - 提供一个麦克风按钮，点击后启动语音识别。
    - 应有明确的视觉反馈（如动画图标）提示用户“正在收听...”。
    - 语音识别结束后，自动将结果填充到文本输入框中，允许用户进行二次编辑和确认。
  - **1.1.3. 快捷标签：** (可选增强功能) 提供一些常用偏好（如“亲子”、“穷游”、“情侣”、“美食”）的标签，用户点击即可快速添加到需求中。
- **1.2. 行程生成与展示**
  - **1.2.1. 生成触发：** 用户点击“生成行程”按钮后，向后端发起请求。
  - **1.2.2. 加载状态：** 在等待 AI 返回结果时，前端界面必须提供清晰的加载提示，例如加载动画和提示语（“AI 正在为您定制专属行程，请稍候...”）。
  - **1.2.3. 错误处理：** 如果 AI 生成失败或输入不合法，应向用户显示友好的错误提示。
  - **1.2.4. 地图视图：**
    - 作为主交互界面，使用地图展示整个行程的地点分布。
    - 为每日的景点、餐厅、酒店等生成不同的图钉（Markers）。
    - 应能绘制出每日的建议路线。
    - 点击地图上的图钉，可以高亮右侧对应的行程项，并显示地点简介。
  - **1.2.5. 时间线视图：**
    - 在地图旁或下方，以天（Day 1, Day 2...）为单位，用时间线或列表形式清晰展示每日的详细安排。
    - 每项安排应包含：时间段、活动类型（景点/餐饮/交通）、地点名称、简要说明。
    - 应包含景点图片，提升视觉吸引力。
- **1.3. 行程交互**
  - **1.3.1. 查看详情：** 点击任意行程项目，可以展开或弹窗显示更详细的信息（如地址、开放时间、参考票价、简介）。
  - **1.3.2. 保存行程：** 用户对生成的行程满意后，可以点击“保存”按钮，将该行程存入个人账户下（需登录）。
  - **1.3.3. 重新生成：** 提供一个“不满意，换一个”或“重新生成”的按钮，让用户可以用相同的需求再次请求 AI 生成一个不同的方案。

------



### **M2: 费用预算与管理 (Expense Management)**



此模块作为行程规划的配套功能，帮助用户控制旅行成本。

- **2.1. AI 预算分析**
  - **2.1.1. 预算估算：** 在生成行程的同时，AI 需要根据目的地消费水平、旅行天数和用户偏好，给出一个大致的费用估算。
  - **2.1.2. 预算分解：** 估算应分解为主要类目，如交通、住宿、餐饮、门票、购物等，并以图表（如饼图）形式展示。
- **2.2. 旅行开销记录**
  - **2.2.1. 手动记账：** 提供一个“记一笔”的入口，弹出表单让用户记录单笔开销。表单字段应包括：金额、类别（食/住/行/购/玩）、日期、备注。
  - **2.2.2. 语音记账：** 用户可以通过语音快速记账，例如说“今天吃饭花了 100 块”，系统应能识别并自动填充金额、类别和日期。
  - **2.2.3. 账单列表：** 按时间倒序展示所有消费记录，用户可以查看、编辑或删除任意一条记录。
  - **2.2.4. 消费统计：** 提供消费总览页面，实时展示“总花费 vs 总预算”的对比，并用图表分析各类别的消费占比。

------



### **M3: 用户中心与数据同步 (User & Data)**



此模块是实现个性化和数据持久化的基础。

- **3.1. 账户系统**
  - **3.1.1. 注册：** 支持通过邮箱和密码进行新用户注册。
  - **3.1.2. 登录/登出：** 提供标准的用户登录和登出功能。
  - **3.1.3. 密码重置：** 提供“忘记密码”功能，允许用户通过邮箱验证来重置密码。
- **3.2. 数据管理**
  - **3.2.1. 我的行程列表：** 用户登录后，可以看到一个所有已保存行程的列表。
  - **3.2.2. 行程管理：** 在列表上，用户可以对已保存的行程进行查看、重命名或删除操作。
  - **3.2.3. 云端同步：** 用户的行程计划、偏好设置、费用记录等所有数据都应与云端数据库同步，确保用户在更换设备后数据不丢失。
  - **3.2.4. 用户偏好设置：** (可选增强功能) 提供一个偏好设置页面，让用户可以预设一些旅行习惯（如“不吃辣”、“喜欢住青旅”、“对历史博物馆感兴趣”），这些偏好将在后续的 AI 规划中被自动考量。

------



### **M4: 通用与设置 (General & Settings)**



此模块包含应用级的通用功能。

- **4.1. 基础 UI/UX**
  - **4.1.1. 响应式布局：** 应用界面应能自适应不同尺寸的设备（桌面、平板、手机）。
  - **4.1.2. 导航栏/菜单：** 提供清晰的全局导航，方便用户在“行程规划”、“我的行程”、“费用管理”、“设置”等主要功能区之间切换。
- **4.2. 应用设置**
  - **4.2.1. API Key 配置：** （**为助教评审设计**）必须在设置页面提供一个输入框，允许用户（助教）输入并保存在浏览器本地存储中的 API Key（例如阿里云百炼的 Key），应用的所有 AI 功能调用都应使用此 Key。
  - **4.2.2. 关于页面：** 简单的项目介绍、版本号和作者信息。